

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Formulaire d'adresse</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>

</head>
<body>
<form>
    <label for="select-ville">
        Selectionnaer une ville

        <select class="ville" id="select-ville"
        style="width:350px"></select>
    </label>

</form>


</body>
</html>
<script>
    $(document).ready(function() {
        $('#select-ville').select2({
            placeholder: "Tapez le nom d'une ville...",
            theme: 'bootstrap4',
            allowClear: true,
            minimumInputLength: 2,
            ajax: {
                url: 'traitement_utilisateur.php',
                type: 'POST',
                dataType: 'json',
                delay: 250,
                data: function(params) {
                    return {
                        ville: params.term
                    };
                },
                processResults: function(data) {
                    return {
                        results: data.results.map(function(item) {
                            return {
                                id: item.code,
                                text: item.nom
                            };
                        })
                    };
                },
                cache: true
            }
        });
    });
</script>

