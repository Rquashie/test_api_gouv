

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Formulaire d'adresse</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>

</head>
<body>
<form>
    <table>
        <tr>
            <td><label for="select-ville">Sélectionner une ville</label></td>
            <td><select class="ville" id="select-ville" style="width:350px">

            </select></td>
        </tr>
        <tr>
            <td><label for="select-adresse">Sélectionner une adresse</label></td>
            <td><select class="adresse" id="select-adresse" style="width:350px">

            </select></td>
        </tr>
    </table>
</form>



</body>
</html>
<script>
    $('#select-ville').select2({
        theme: 'bootstrap4',
        allowClear: true,
        minimumInputLength: 1,
        ajax: {
            url: 'traitement_ville.php',
            type: 'POST',
            dataType: 'json',
            delay: 200,
            data: function(params) {
                return {
                    ville: params.term
                };
            },
            processResults: function(data) {
                return {
                    results: data.results.map(function(item) {
                        return {
                            id: item.code,
                            text: item.nom
                        };
                    })
                };
            },
            cache: true
        }
    });

    $('#select-adresse').select2({
        theme: 'bootstrap4',
        allowClear: true,
        minimumInputLength: 1,
        ajax: {
            url: 'traitement_adresse.php',
            type: 'POST',
            dataType: 'json',
            delay: 200,
            data: function(params) {
                return {
                    adresse: params.term
                };
            },
            processResults: function(data) {
                return {
                    results: data.results.map(function(item) {
                        return {
                            id: item.code,
                            text: item.nom
                        };
                    })
                };
            },
            cache: true
        }
    });


</script>

